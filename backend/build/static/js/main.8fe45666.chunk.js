(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),l=n.n(c),u=n(9),o=n(16),i=n(7),s=n.n(i),m=n(17),d=n(27),p=n.n(d),f=null,b={getAll:function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(m.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,p.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(m.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,p.a.put("".concat("/api/blogs","/").concat(t.id),t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){f="bearer ".concat(e)},resetToken:function(){f=null},deleteBlog:function(){var e=Object(m.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,p.a.delete("".concat("/api/blogs","/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E={message:null,type:null},g=function(e,t){return{type:"SHOW",message:e,msgType:t}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW":return{message:t.message,type:t.msgType};case"HIDE":return E;default:return e}},h=n(71),O=[],y=function(e){return{type:"TOGGLE",data:{id:e}}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_VIEW":return[].concat(Object(h.a)(e),[t.data]);case"TOGGLE":return e.map((function(e){return e.id!==t.data.id?e:Object(o.a)(Object(o.a)({},e),{},{visibility:!e.visibility})}));default:return e}},j={title:"",author:"",url:""},T=function(e){var t=e.target.id,n=e.target.value;switch(t){case"fTitle":return{type:"SET_TITLE",data:n};case"fAuthor":return{type:"SET_AUTHOR",data:n};case"fUrl":return{type:"SET_URL",data:n};default:return{type:""}}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":return Object(o.a)(Object(o.a)({},e),{},{title:t.data});case"SET_AUTHOR":return Object(o.a)(Object(o.a)({},e),{},{author:t.data});case"SET_URL":return Object(o.a)(Object(o.a)({},e),{},{url:t.data});case"RESET":return j;default:return e}},S=function(e,t,n){n(g(e,t)),setTimeout((function(){n({type:"HIDE"})}),5e3)},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_BLOG":return e.concat(t.data);case"REMOVE_BLOG":return e.filter((function(e){return e.id!==t.data.id}));case"LIKE":return e.map((function(e){return e.id!==t.data.id?e:t.data}));case"INIT_BLOGS":return t.data;default:return e}},I=n(14),L=n(157),U=n(159),_=n(146),N=function(e){var t=e.blog,n=Object(u.b)();return t?r.a.createElement(L.a,null,r.a.createElement(L.a,null,"Title:"),r.a.createElement(L.a,{mb:2},r.a.createElement("strong",null,t.title," ",t.author)),r.a.createElement(L.a,null,"Link:"),r.a.createElement(L.a,{mb:2},r.a.createElement(U.a,{href:t.url,target:"_blank",rel:"noopener"},t.url)),r.a.createElement(L.a,{mb:2},"Likes: ",r.a.createElement("strong",null,t.likes)),r.a.createElement(L.a,null,"User:"),r.a.createElement(L.a,{mb:2},r.a.createElement("strong",null,t.user.name)),r.a.createElement(L.a,{mb:2},r.a.createElement(_.a,{variant:"contained",color:"primary",id:"likeBtn",onClick:function(){return n((e=t.id,function(){var t=Object(m.a)(s.a.mark((function t(n,a){var r,c,l,u,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a(),c=r.blogs,!(l=c.find((function(t){return t.id===e})))){t.next=8;break}return u=Object(o.a)(Object(o.a)({},l),{},{likes:l.likes+1}),t.next=6,b.update(u);case 6:i=t.sent,n({type:"LIKE",data:i});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));var e}},"like"),r.a.createElement("br",null)),r.a.createElement(L.a,null,r.a.createElement(_.a,{variant:"contained",color:"secondary",onClick:function(){var e;n((e=t.id,function(){var t=Object(m.a)(s.a.mark((function t(n,a){var r,c,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a(),c=r.blogs,l=c.find((function(t){return t.id===e})),!window.confirm("Remove blog ".concat(l.title," by ").concat(l.author,"?"))){t.next=7;break}return t.next=5,b.deleteBlog(l.id);case 5:n({type:"REMOVE_BLOG",data:l}),S("Blog ".concat(l.title," was removed"),"success",n);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()))}},"remove"))):r.a.createElement(I.a,{to:"/"})},R=n(22),A=n(147),B=n(114),G=n(148),C=n(149),D=n(150),W=n(151),H=function(){var e=Object(u.c)((function(e){return e.blogs})),t=Object(I.h)("/blogs/:id"),n=t?e.find((function(e){return e.id===t.params.id})):null;return r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/blogs/:id"},r.a.createElement(N,{blog:n})),r.a.createElement(I.b,null,r.a.createElement(L.a,{mt:2},r.a.createElement(A.a,{component:B.a},r.a.createElement(G.a,null,r.a.createElement(C.a,null,e.map((function(e){return r.a.createElement(D.a,{key:e.id},r.a.createElement(W.a,null,r.a.createElement(R.b,{to:"/blogs/".concat(e.id)},e.title)))}))))))))},q=n(158),F=function(){var e=Object(u.c)((function(e){return e.notification}));return null===e.message?null:"error"===e.type?r.a.createElement(q.a,{severity:"error"},e.message):r.a.createElement(q.a,{className:"success"},e.message)},M=function(e){var t,n=e.id,c=e.buttonLabel,l=e.cancelLabel,o=Object(u.b)(),i=Object(u.c)((function(e){return e.togglable})).find((function(e){return e.id===n}));i&&(t=i.visibility);var s={display:t?"none":""},m={display:t?"":"none"};Object(a.useEffect)((function(){o(function(e){return{type:"INIT_VIEW",data:{id:e,visibility:!1}}}(n))}),[o,n]);var d=function(){o(y(n))};return r.a.createElement("div",null,r.a.createElement("div",{style:s},r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:d},c)),r.a.createElement("div",{style:m,className:"togglableContent"},e.children,r.a.createElement("br",null),r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:d},l||"cancel")))};M.displayName="Togglable";var P=M,J={login:function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},V={username:"",password:"",user:null},z=function(e){var t=e.target.name,n=e.target.value;switch(t){case"Username":return{type:"SET_USERNAME",data:n};case"Password":return{type:"SET_PASSWORD",data:n};default:return{type:""}}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERNAME":return Object(o.a)(Object(o.a)({},e),{},{username:t.data});case"SET_PASSWORD":return Object(o.a)(Object(o.a)({},e),{},{password:t.data});case"SET_USER":return Object(o.a)(Object(o.a)({},e),{},{user:t.data});case"LOGIN":return{username:"",password:"",user:t.data};case"LOGOUT":return{username:"",password:"",user:null};default:return e}},Q=n(155),X=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login.username})),n=Object(u.c)((function(e){return e.login.password}));return r.a.createElement("form",{onSubmit:function(t){return e(function(e){return e.preventDefault(),function(){var e=Object(m.a)(s.a.mark((function e(t,n){var a,r,c,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),r=a.login,c=r.username,l=r.password,e.next=6,J.login({username:c,password:l});case 6:u=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(u)),b.setToken(u.token),t({type:"LOGIN",data:u}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t(g("wrong credentials","error")),setTimeout((function(){t({type:"HIDE"})}),5e3);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()}(t))}},r.a.createElement("div",null,r.a.createElement(Q.a,{id:"username",type:"text",value:t,name:"Username",label:"Username",onChange:function(t){return e(z(t))},required:!0})),r.a.createElement("div",null,r.a.createElement(Q.a,{id:"password",type:"password",value:n,name:"Password",label:"Password",onChange:function(t){return e(z(t))},required:!0})),r.a.createElement("br",null),r.a.createElement(_.a,{id:"login-button",variant:"contained",color:"primary",type:"submit"},"login"))},Y=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"blog app"),r.a.createElement(F,null),r.a.createElement(P,{id:"login",buttonLabel:"login"},r.a.createElement(X,null)))},Z=n(152),$=n(153),ee=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login.user}));return r.a.createElement(Z.a,{position:"static"},r.a.createElement($.a,null,r.a.createElement("div",null,r.a.createElement(_.a,{color:"inherit",component:R.b,to:"/"},"blogs"),r.a.createElement(_.a,{color:"inherit",component:R.b,to:"/users"},"users"),t.name," logged in",r.a.createElement(_.a,{color:"inherit",onClick:function(){return e((window.localStorage.removeItem("loggedBlogappUser"),b.resetToken(),{type:"LOGOUT"}))}},"logout"))))},te=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.blogForm.title})),n=Object(u.c)((function(e){return e.blogForm.author})),a=Object(u.c)((function(e){return e.blogForm.url}));return r.a.createElement("div",{className:"formDiv"},r.a.createElement("form",{onSubmit:function(t){return e(function(e){return e.preventDefault(),function(){var e=Object(m.a)(s.a.mark((function e(t,n){var a,r,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.blogForm,c={title:r.title,author:r.author,url:r.url},e.next=4,b.create(c);case 4:l=e.sent,t({type:"NEW_BLOG",data:l}),t({type:"RESET"}),t(y("new blog")),S("A new blog ".concat(l.title," by ").concat(l.author),"success",t);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}(t))}},r.a.createElement(Q.a,{required:!0,id:"fTitle",label:"Title",value:t,onChange:function(t){return e(T(t))}}),r.a.createElement("br",null),r.a.createElement(Q.a,{required:!0,id:"fAuthor",label:"Author",value:n,onChange:function(t){return e(T(t))}}),r.a.createElement("br",null),r.a.createElement(Q.a,{required:!0,id:"fUrl",label:"Url",value:a,onChange:function(t){return e(T(t))}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(_.a,{variant:"contained",color:"primary",type:"submit"},"create"),r.a.createElement("br",null)))},ne=function(){return r.a.createElement(L.a,{mb:2},r.a.createElement(P,{id:"new blog",buttonLabel:"new blog"},r.a.createElement(te,null)))},ae=function(e){var t=e.user;return t?r.a.createElement("div",null,r.a.createElement("h1",null,t.name),r.a.createElement("h2",null,"added blogs"),r.a.createElement("ul",null,t.blogs.map((function(e){return r.a.createElement("li",{key:e.title},e.title)})))):null},re=function(){var e=Object(u.c)((function(e){return e.users})),t=Object(I.h)("/users/:id"),n=t?e.find((function(e){return e.id===t.params.id})):null;return r.a.createElement("div",null,r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/users/:id"},r.a.createElement(ae,{user:n})),r.a.createElement(I.b,null,r.a.createElement("h1",null,"Users"),r.a.createElement(A.a,{component:B.a},r.a.createElement(G.a,null,r.a.createElement(C.a,null,r.a.createElement(D.a,null,r.a.createElement(W.a,null),r.a.createElement(W.a,null,r.a.createElement("strong",null,"blogs created"))),e.map((function(e){return r.a.createElement(D.a,{key:e.id},r.a.createElement(W.a,null,r.a.createElement(R.b,{to:"/users/".concat(e.id)},e.name)),r.a.createElement(W.a,null,e.blogs.length))}))))))))},ce={getAll:function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}},ue=n(154),oe=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login.user})),n=Object(u.c)((function(e){return e.blogs})),c=Object(I.g)();return Object(a.useEffect)((function(){e(function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);return b.setToken(t.token),{type:"SET_USER",data:t}}return{type:""}}())}),[e]),Object(a.useEffect)((function(){t&&0===n.length&&(e(function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getAll();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c.push("/"))}),[t,n.length,c,e]),r.a.createElement(ue.a,null,r.a.createElement("div",null,null===t?r.a.createElement(Y,null):r.a.createElement("div",null,r.a.createElement(ee,null),r.a.createElement(F,null),r.a.createElement("h1",null,"blog app"),r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/users"},r.a.createElement(re,null)),r.a.createElement(I.b,{path:"/"},r.a.createElement(ne,null),r.a.createElement(H,null))))))},ie=n(32),se=n(69),me=n(70),de=Object(ie.combineReducers)({blogs:x,notification:v,togglable:w,blogForm:k,login:K,users:le}),pe=Object(ie.createStore)(de,Object(se.composeWithDevTools)(Object(ie.applyMiddleware)(me.a)));n(111);l.a.render(r.a.createElement(u.a,{store:pe},r.a.createElement(R.a,null,r.a.createElement(oe,null))),document.getElementById("root"))},83:function(e,t,n){e.exports=n(112)}},[[83,1,2]]]);
//# sourceMappingURL=main.8fe45666.chunk.js.map